<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>APIOverview | amazon-chime-sdk-js</title><meta name="description" content="Documentation for amazon-chime-sdk-js"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">amazon-chime-sdk-js</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">amazon-chime-sdk-js</a></li><li><a href="guides_docs.html">guides/docs</a></li><li><a href="guides_docs.APIOverview.html">APIOverview</a></li></ul><h1>Namespace APIOverview</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><a id="api-overview" class="tsd-anchor"></a><h1 class="tsd-anchor-link">API Overview<a href="#api-overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This guide gives an overview of the API methods you can use to create meeting with audio and video with a roster of attendees and basic controls. Several additional API methods that may be helpful are also described and marked optional.</p>
<ul>
<li><a href="#api-overview">API Overview</a>
<ul>
<li><a href="#1-create-a-session">1. Create a session</a>
<ul>
<li><a href="#1a-create-a-logger">1a. Create a logger</a></li>
<li><a href="#1b-create-a-device-controller">1b. Create a device controller</a></li>
<li><a href="#1c-create-a-meeting-from-your-server-application">1c. Create a meeting from your server application</a></li>
<li><a href="#1d-create-a-meeting-session-configuration">1d. Create a meeting session configuration</a></li>
<li><a href="#1e-create-a-meeting-session">1e. Create a meeting session</a></li>
</ul>
</li>
<li><a href="#2-configure-the-session">2. Configure the session</a>
<ul>
<li><a href="#2a-configure-the-device-label-trigger-optional">2a. Configure the device label trigger (optional)</a>
<ul>
<li><a href="#implement-a-view-onlyobserverspectator-experience">Implement a view-only/observer/spectator experience</a></li>
<li><a href="#safari-user-are-not-able-to-join-the-meeting-in-view-only-mode">Safari user are not able to join the meeting in view-only mode</a></li>
</ul>
</li>
<li><a href="#2b-register-a-device-change-observer-optional">2b. Register a device-change observer (optional)</a></li>
<li><a href="#2c-configure-the-audio-input-device">2c. Configure the audio input device</a></li>
<li><a href="#2d-preview-microphone-volume-levels-optional">2d. Preview microphone volume levels (optional)</a></li>
<li><a href="#2e-configure-the-audio-output-device-optional">2e. Configure the audio output device (optional)</a></li>
<li><a href="#2f-bind-the-audio-output-to-an-audio-element">2f. Bind the audio output to an audio element</a></li>
<li><a href="#2g-configure-the-video-input-device">2g. Configure the video input device</a></li>
<li><a href="#2h-preview-local-camera-in-a-video-element-optional">2h. Preview local camera in a video element (optional)</a></li>
</ul>
</li>
<li><a href="#3-register-an-audio-video-observer">3. Register an audio-video observer</a></li>
<li><a href="#4-start-and-stop-the-session">4. Start and stop the session</a>
<ul>
<li><a href="#4a-set-ideal-video-max-bandwidth-kbps">4a. Set ideal video max bandwidth kbps</a></li>
</ul>
</li>
<li><a href="#5-build-a-roster-of-participants-using-the-real-time-api">5. Build a roster of participants using the real-time API</a>
<ul>
<li><a href="#5a-subscribe-to-attendee-presence-changes">5a. Subscribe to attendee presence changes</a></li>
<li><a href="#5b-subscribe-to-volume-indicators">5b. Subscribe to volume indicators</a></li>
<li><a href="#5c-signal-strength-change-optional">5c. Signal strength change (optional)</a></li>
<li><a href="#5d-subscribe-to-an-active-speaker-detector-optional">5d. Subscribe to an active-speaker detector (optional)</a></li>
</ul>
</li>
<li><a href="#6-mute-and-unmute-microphone-audio-with-the-real-time-api">6. Mute and unmute microphone audio with the real-time API</a>
<ul>
<li><a href="#6a-mute-and-unmute-audio">6a. Mute and unmute audio</a></li>
<li><a href="#6b-prevent-a-local-attendee-from-unmuting-audio-optional">6b. Prevent a local attendee from unmuting audio (optional)</a></li>
</ul>
</li>
<li><a href="#7-share-and-display-video">7. Share and display video</a>
<ul>
<li><a href="#7a-share-local-video">7a. Share local video</a></li>
<li><a href="#7b-display-local-and-remote-video">7b. Display local and remote video</a></li>
<li><a href="#7c-pause-and-unpause-video-optional">7c. Pause and unpause video (optional)</a></li>
<li><a href="#7d-find-video-tiles-optional">7d. Find video tiles (optional)</a></li>
</ul>
</li>
<li><a href="#8-share-screen-and-other-content-optional">8. Share screen and other content (optional)</a>
<ul>
<li><a href="#8a-start-and-stop-the-content-share">8a. Start and stop the content share</a></li>
<li><a href="#8b-register-a-content-share-observer">8b. Register a content share observer</a></li>
</ul>
</li>
<li><a href="#9-send-and-receive-data-messages-optional">9. Send and receive data messages (optional)</a></li>
</ul>
</li>
</ul>
<a id="1-create-a-session" class="tsd-anchor"></a><h2 class="tsd-anchor-link">1. Create a session<a href="#1-create-a-session" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/meetingsession.html">MeetingSession</a> and its <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/meetingsession.html#audiovideo">AudioVideoFacade</a> are the starting points for creating meetings. To create a meeting session, you will first need a <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/logger.html">Logger</a>, <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/devicecontrollerbasedmediastreambroker.html">DeviceController</a>, and <a href="https://aws.github.io/amazon-chime-sdk-js/classes/meetingsessionconfiguration.html">MeetingSessionConfiguration</a>. The subsequent sections assume that you have created these four things.</p>
<a id="1a-create-a-logger" class="tsd-anchor"></a><h3 class="tsd-anchor-link">1a. Create a logger<a href="#1a-create-a-logger" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Create a <a href="https://aws.github.io/amazon-chime-sdk-js/classes/consolelogger.html">ConsoleLogger</a> to log everything to the browser console. You can also implement the <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/logger.html">Logger</a> interface to customize logging behavior.</p>
<pre><code><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">logger</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">ConsoleLogger</span><span class="hl-1">(</span><span class="hl-3">&#39;MeetingLogs&#39;</span><span class="hl-1">, </span><span class="hl-0">LogLevel</span><span class="hl-1">.</span><span class="hl-5">INFO</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>

<a id="1b-create-a-device-controller" class="tsd-anchor"></a><h3 class="tsd-anchor-link">1b. Create a device controller<a href="#1b-create-a-device-controller" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Create a <a href="https://aws.github.io/amazon-chime-sdk-js/classes/defaultdevicecontroller.html#constructor">DefaultDeviceController</a> and pass in the Logger you created. This object allows you to enumerate and select audio and video devices and control some of their features, even before the meeting session has been created.</p>
<pre><code><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">deviceController</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">DefaultDeviceController</span><span class="hl-1">(</span><span class="hl-0">logger</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>

<a id="1c-create-a-meeting-from-your-server-application" class="tsd-anchor"></a><h3 class="tsd-anchor-link">1c. Create a meeting from your server application<a href="#1c-create-a-meeting-from-your-server-application" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use AWS SDK to create the Chime object. Use the Chime object to get meeting and attendee objects from <a href="https://docs.aws.amazon.com/chime-sdk/latest/APIReference/API_meeting-chime_CreateMeeting.html">CreateMeeting</a>
and <a href="https://docs.aws.amazon.com/chime-sdk/latest/APIReference/API_meeting-chime_CreateAttendee.html">CreateAttendee</a> Chime APIs. See <a href="https://github.com/aws/amazon-chime-sdk-js#getting-responses-from-your-server-application">Getting responses from your
server application</a> for more information.</p>
<a id="1d-create-a-meeting-session-configuration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">1d. Create a meeting session configuration<a href="#1d-create-a-meeting-session-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Create a <a href="https://aws.github.io/amazon-chime-sdk-js/classes/meetingsessionconfiguration.html#constructor">MeetingSessionConfiguration</a> object with the responses to <a href="https://docs.aws.amazon.com/chime-sdk/latest/APIReference/API_meeting-chime_CreateMeeting.html">CreateMeeting</a> and <a href="https://docs.aws.amazon.com/chime-sdk/latest/APIReference/API_meeting-chime_CreateAttendee.html">CreateAttendee</a>. Your server application should make these API calls and securely pass the meeting and attendee responses to the browser client application.</p>
<pre><code><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">configuration</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">MeetingSessionConfiguration</span><span class="hl-1">(</span><span class="hl-0">meetingResponse</span><span class="hl-1">, </span><span class="hl-0">attendeeResponse</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>

<a id="1e-create-a-meeting-session" class="tsd-anchor"></a><h3 class="tsd-anchor-link">1e. Create a meeting session<a href="#1e-create-a-meeting-session" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Using the above objects, create a <a href="https://aws.github.io/amazon-chime-sdk-js/classes/defaultmeetingsession.html#constructor">DefaultMeetingSession</a>.</p>
<pre><code><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">meetingSession</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">DefaultMeetingSession</span><span class="hl-1">(</span><span class="hl-0">configuration</span><span class="hl-1">, </span><span class="hl-0">logger</span><span class="hl-1">, </span><span class="hl-0">deviceController</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>

<a id="2-configure-the-session" class="tsd-anchor"></a><h2 class="tsd-anchor-link">2. Configure the session<a href="#2-configure-the-session" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Before starting the meeting session, you should configure audio and video devices. By default, no devices are selected.</p>
<a id="2a-configure-the-device-label-trigger-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2a. Configure the device label trigger (optional)<a href="#2a-configure-the-device-label-trigger-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When obtaining devices to configure, the browser may initially decline to provide device labels due to privacy restrictions. However, without device labels the application user will not be able to select devices by name. When no labels are present, the device-label trigger is run. The default implementation of the device-label trigger requests permission to the mic and camera. If the user grants permission, the device labels will become available.</p>
<p>You can override the behavior of the device-label trigger by calling meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#setdevicelabeltrigger">setDeviceLabelTrigger(trigger)</a>.</p>
<a id="implement-a-view-onlyobserverspectator-experience" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Implement a view-only/observer/spectator experience<a href="#implement-a-view-onlyobserverspectator-experience" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>To enable a view-only experience, you need to control the device permission prompts for audio and video. We suggest that you implement it based on <code>deviceLabelsTrigger</code>. By following this, you can achieve it with just little changes.</p>
<p>Note: The view-only mode doesn't impact the ability to view content or listen to audio in your meeting experience.</p>
<p>To suppress device permission prompts, let <code>deviceLabelTrigger</code> return an empty <code>MediaStream</code> before joining the meeting. Since it's an empty stream, the device permission prompts can't be triggered.</p>
<p>Note: Chrome and Safari don't expose the <code>deviceId</code> without granting device permission, but Firefox do. In Firefox, if you try to select the device with <code>deviceId</code>, the device permission prompts will be triggered.</p>
<p>To invoke device permission prompts, let <code>deviceLabelTrigger</code> return a <code>MediaStream</code> that contains your desired device kind. You can trigger it to grant device permission to the browser. After that, list and select the devices to regain the access to devices.</p>
<pre><code class="js"><span class="hl-7">// Suppress devices</span><br/><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">setDeviceLabelTrigger</span><span class="hl-1">(() </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-12">Promise</span><span class="hl-1">.</span><span class="hl-6">resolve</span><span class="hl-1">(</span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">MediaStream</span><span class="hl-1">()));</span><br/><br/><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">start</span><span class="hl-1">();</span><br/><br/><span class="hl-7">// Invoke devices</span><br/><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">setDeviceLabelTrigger</span><span class="hl-1">(</span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">navigator</span><span class="hl-1">.</span><span class="hl-0">mediaDevices</span><span class="hl-1">.</span><span class="hl-6">getUserMedia</span><span class="hl-1">({ </span><span class="hl-0">audio:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">, </span><span class="hl-0">video:</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1"> })</span><br/><span class="hl-1">);</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">audioInputDevices</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">meetingSession</span><span class="hl-1">.</span><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">listAudioInputDevices</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">audioOutputDevices</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">meetingSession</span><span class="hl-1">.</span><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">listAudioOutputDevices</span><span class="hl-1">();</span><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">videoInputDevices</span><span class="hl-1"> = </span><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">meetingSession</span><span class="hl-1">.</span><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">listVideoInputDevices</span><span class="hl-1">();</span><br/><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">meetingSession</span><span class="hl-1">.</span><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">startAudioInput</span><span class="hl-1">(</span><span class="hl-0">audioInputDevice</span><span class="hl-1">.</span><span class="hl-0">deviceId</span><span class="hl-1">);</span><br/><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">meetingSession</span><span class="hl-1">.</span><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">chooseAudioOutput</span><span class="hl-1">(</span><span class="hl-0">audioOutputDevice</span><span class="hl-1">.</span><span class="hl-0">deviceId</span><span class="hl-1">);</span><br/><span class="hl-2">await</span><span class="hl-1"> </span><span class="hl-0">meetingSession</span><span class="hl-1">.</span><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">startVideoInput</span><span class="hl-1">(</span><span class="hl-0">videoInputDevices</span><span class="hl-1">.</span><span class="hl-0">deviceId</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="safari-user-are-not-able-to-join-the-meeting-in-view-only-mode" class="tsd-anchor"></a><h4 class="tsd-anchor-link">Safari user are not able to join the meeting in view-only mode<a href="#safari-user-are-not-able-to-join-the-meeting-in-view-only-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>Safari users may not be able to successfully join the meeting in view-only mode, due to this known issue <a href="https://github.com/aws/amazon-chime-sdk-js/issues/474">#474</a>. Since we are still working on this, you can fix it locally by allowing Safari's Autoplay. The specific steps are:</p>
<ol>
<li>Open your application in the Safari app on your Mac.</li>
<li>Choose Safari &gt; Settings for This Website.
You can also Control-click in the Smart Search field, then choose Settings for This Website.</li>
<li>Hold the pointer to the right of Auto-Play, then click the pop-up menu and choose the option:
<ul>
<li>Allow All Auto-Play: Lets videos on this website play automatically.</li>
</ul>
</li>
</ol>
<a id="2b-register-a-device-change-observer-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2b. Register a device-change observer (optional)<a href="#2b-register-a-device-change-observer-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can receive events about changes to available devices by implementing a <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/devicechangeobserver.html">DeviceChangeObserver</a> and registering the observer with the device controller.</p>
<p>To add a DeviceChangeObserver, call deviceController.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#adddevicechangeobserver">addDeviceChangeObserver(observer)</a>.</p>
<p>To remove a DeviceChangeObserver, call deviceController.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#removedevicechangeobserver">removeDeviceChangeObserver(observer)</a>.</p>
<p>You can implement the following callbacks:</p>
<ul>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/devicechangeobserver.html#audioinputschanged">audioInputsChanged</a>: occurs when audio inputs are changed</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/devicechangeobserver.html#audiooutputschanged">audioOutputsChanged</a>: occurs when audio outputs are changed</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/devicechangeobserver.html#videoinputschanged">videoInputsChanged</a>: occurs when video inputs are changed</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/devicechangeobserver.html#audioinputmutestatechanged">audioInputMuteStateChanged</a>: occurs when the underlying OS or hardware mute setting is detected on an audio track input</li>
</ul>
<a id="2c-configure-the-audio-input-device" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2c. Configure the audio input device<a href="#2c-configure-the-audio-input-device" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To send audio to the remote attendees, list the available audio input devices and choose an input to use.</p>
<p>To retrieve a list of available audio input devices, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#listaudioinputdevices">listAudioInputDevices()</a>.</p>
<p>To use the chosen audio input device, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#startaudioinput">startAudioInput(device)</a>.</p>
<a id="2d-preview-microphone-volume-levels-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2d. Preview microphone volume levels (optional)<a href="#2d-preview-microphone-volume-levels-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can create a WebAudio <a href="https://developer.mozilla.org/en-US/docs/Web/API/AnalyserNode">AnalyserNode</a> from the current audio input to generate a display such as a mic indicator. This is useful for allowing attendees to preview their microphone volume level prior to joining the meeting.</p>
<p>To create the AnalyserNode, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#createanalysernodeforaudioinput">createAnalyserNodeForAudioInput()</a>.</p>
<a id="2e-configure-the-audio-output-device-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2e. Configure the audio output device (optional)<a href="#2e-configure-the-audio-output-device-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>On browsers that <a href="https://caniuse.com/#search=setSinkId">support setSinkId</a>, you can optionally list the available audio output devices and choose one to use.</p>
<p>To retrieve a list of available audio output devices, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#listaudiooutputdevices">listAudioOutputDevices()</a>.</p>
<p>To use the chosen audio output device, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#chooseaudiooutput">chooseAudioOutput(deviceId)</a>.</p>
<a id="2f-bind-the-audio-output-to-an-audio-element" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2f. Bind the audio output to an audio element<a href="#2f-bind-the-audio-output-to-an-audio-element" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To hear audio from the remote attendees, bind the audio output device to an HTMLAudioElement in the DOM. The element does not need to be visible; you can hide it with CSS style <code>display: none</code>.</p>
<p>To bind the chosen audio output device to a HTMLAudioElement, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#bindaudioelement">bindAudioElement(element)</a>.</p>
<p>To unbind the chosen audio output device, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#unbindaudioelement">unbindAudioElement()</a>.</p>
<a id="2g-configure-the-video-input-device" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2g. Configure the video input device<a href="#2g-configure-the-video-input-device" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To send video to remote attendees, list the available video input devices, optionally select video quality settings, and choose a device to use.</p>
<p>To get a list of available video input devices, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#listvideoinputdevices">listVideoInputDevices()</a>.</p>
<p>You can configure the quality of the video that is sent to the remote attendees by calling meetingSession.audioVideo.
<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#choosevideoinputquality">chooseVideoInputQuality(width, height, frameRate)</a>.
The changes take effect the next time a video input device is chosen. The default quality is 960x540 @ 15 fps. The maximum supported quality settings
are 1280x720 @ 30 fps. Actual quality achieved may vary throughout the call depending on what the device and system can provide.</p>
<p>To start or switch a video input device, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#startvideoinput">startVideoInput(device)</a>.</p>
<p>To stop the current video input device, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#stopvideoinput">stopVideoInput</a>.</p>
<a id="2h-preview-local-camera-in-a-video-element-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2h. Preview local camera in a video element (optional)<a href="#2h-preview-local-camera-in-a-video-element-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Before the session is started, you can start a preview of the video in an HTMLVideoElement in the DOM.</p>
<p>To start video preview, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#startvideopreviewforvideoinput">startVideoPreviewForVideoInput(element)</a>.</p>
<p>To stop video preview, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#stopvideopreviewforvideoinput">stopVideoPreviewForVideoInput(element)</a>.</p>
<a id="3-register-an-audio-video-observer" class="tsd-anchor"></a><h2 class="tsd-anchor-link">3. Register an audio-video observer<a href="#3-register-an-audio-video-observer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You can receive audio and video events by implementing the <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html">AudioVideoObserver</a> interface and registering the observer with the meeting session.</p>
<p>To add an AudioVideoObserver, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#addobserver">addObserver(observer)</a>.</p>
<p>To remove an AudioVideoObserver, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#removeobserver">removeObserver(observer)</a>.</p>
<p>You should implement the following key observer callbacks:</p>
<ul>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#audiovideodidstart">audioVideoDidStart</a>: occurs when the audio-video session finishes connecting.</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#audiovideodidstartconnecting">audioVideoDidStartConnecting</a>: occurs when the audio-video session is in the process of connecting or reconnecting.</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#audiovideodidstop">audioVideoDidStop</a>: occurs when the audio-video session has disconnected. Use the provided <a href="https://aws.github.io/amazon-chime-sdk-js/classes/meetingsessionstatus.html">MeetingSessionStatus</a> to determine why the session disconnected.</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videotiledidupdate">videoTileDidUpdate</a>: occurs when either a video stream is started or updated. Use the provided VideoTileState to determine the tile ID and the attendee ID of the video stream.</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videotilewasremoved">videoTileWasRemoved</a>: occurs when a video stream stops and the reference to the tile (the tile ID) is deleted.</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videoavailabilitydidchange">videoAvailabilityDidChange</a>: occurs video availability state has changed such as whether the attendee can start local video or whether remote video is available. See <a href="https://aws.github.io/amazon-chime-sdk-js/classes/meetingsessionvideoavailability.html">MeetingSessionVideoAvailability</a> for more information.</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videosenddidbecomeunavailable">videoSendDidBecomeUnavailable</a>: occurs when attendee tries to start video but the maximum video limit of 25 tiles has already been reached by other attendees sharing their video.</li>
</ul>
<p>You may optionally listen to the following callbacks to monitor aspects of connection health:</p>
<ul>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#connectiondidbecomepoor">connectionDidBecomePoor</a>: occurs when the connection has been poor for a while</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#connectiondidsuggeststopvideo">connectionDidSuggestStopVideo</a>: occurs when the connection has been poor while using video. You can use this to prompt the attendee to turn off video.</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#connectionhealthdidchange">connectionHealthDidChange</a>: occurs when connection health has changed.</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#metricsdidreceive">metricsDidReceive</a>: occurs periodically when WebRTC media stats are available.</li>
</ul>
<a id="4-start-and-stop-the-session" class="tsd-anchor"></a><h2 class="tsd-anchor-link">4. Start and stop the session<a href="#4-start-and-stop-the-session" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>After completing configuration of audio and video (see previous sections) call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#start">start()</a>. This method will initialize all underlying components, set up connections, and immediately start sending and receiving audio.</p>
<p>To stop the meeting session, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#stop">stop()</a>.</p>
<p>The <code>stop()</code> method does not clean up observers. You can start and stop a session multiple times using the same observers. In other words observers are not tied to the lifecycle of the session.</p>
<p>You can specify a <code>signalingOnly</code> option when calling <code>start</code> to cause only the initial signaling connection to be established, then complete meeting join with a second call to <code>start</code> after choosing audio and video sources. This can improve meeting join latency. You can use this approach if you know that the user wants to join a meeting prior to wanting to share media or having selected input devices — for example, you can initialize the signaling connection early if you have a 'lobby' experience after choosing to join but before entering the interactive portion of the meeting.</p>
<a id="4a-set-ideal-video-max-bandwidth-kbps" class="tsd-anchor"></a><h3 class="tsd-anchor-link">4a. Set ideal video max bandwidth kbps<a href="#4a-set-ideal-video-max-bandwidth-kbps" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#setvideomaxbandwidthkbps">setVideoMaxBandwidthKbps</a> to set the ideal video max bandwidth kbps.
The default value is 1400 kbps. Actual quality achieved may vary throughout the call depending on what system and network can provide.</p>
<a id="5-build-a-roster-of-participants-using-the-real-time-api" class="tsd-anchor"></a><h2 class="tsd-anchor-link">5. Build a roster of participants using the real-time API<a href="#5-build-a-roster-of-participants-using-the-real-time-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Use the following methods to learn when attendees join and leave and when their volume level, mute state, or signal strength changes.</p>
<p>When implementing a real-time callback, you must ensure that it never throws an exception. To preserve privacy, uncaught exceptions inside a real-time callback are treated as fatal: the session is disconnected immediately. The cautions around real-time callbacks do not apply to the observers. For example, uncaught exceptions are not fatal to observers (though they should be avoided).</p>
<p>Real-time volume indicator callbacks are called at a rate of 5 updates per second. Ensure that your application is able to smoothly render these updates to avoid causing unnecessary CPU load that could degrade the meeting experience.</p>
<p><em>If you are using Angular</em>, ensure that all calls to the SDK are run outside of the Angular zone. Otherwise, the real-time messages received via the signaling channel and their real-time callbacks may cause the DOM to thrash with updates and degrade performance.</p>
<a id="5a-subscribe-to-attendee-presence-changes" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5a. Subscribe to attendee presence changes<a href="#5a-subscribe-to-attendee-presence-changes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To learn when attendees join or leave, subscribe to the attendee ID presence changes. The callback provides both the attendee ID and external user ID from <a href="https://docs.aws.amazon.com/chime-sdk/latest/APIReference/API_meeting-chime_CreateAttendee.html">CreateAttendee</a> so that you may map between the two IDs.</p>
<p>To subscribe to attendee presence changes, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimesubscribetoattendeeidpresence">realtimeSubscribeToAttendeeIdPresence(callback)</a>.</p>
<p>To unsubscribe to attendee presence changes, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimeunsubscribetoattendeeidpresence">realtimeUnsubscribeToAttendeeIdPresence(callback)</a>.</p>
<a id="5b-subscribe-to-volume-indicators" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5b. Subscribe to volume indicators<a href="#5b-subscribe-to-volume-indicators" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To show speaker volume, mute state, and signal strength for each attendee, subscribe to volume indicators for each attendee ID. You should subscribe and unsubscribe to attendee volume indicators as part of the attendee ID presence callback.</p>
<p>Volume is on a scale of 0 to 1 (no volume to max volume). Signal strength is on a scale of 0 to 1 (full packet loss to no packet loss). You can use the signal strength of remote attendees to show an indication of whether an attendee is experiencing packet loss and thus may be unable to communicate at the moment.</p>
<p>Signal strength</p>
<ul>
<li>0 - 100% loss of audio data</li>
<li>&lt; 0.5 - Between 50% to 100% loss of audio data</li>
<li>
<blockquote>
<p>= 0.5 - Less than 50% loss of audio data</p>
</blockquote>
</li>
</ul>
<p>To subscribe to an attendee’s volume indicator, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimesubscribetovolumeindicator">realtimeSubscribeToVolumeIndicator(attendeeId, callback)</a>.</p>
<p>To unsubscribe from an attendee’s volume indicator, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimeunsubscribefromvolumeindicator">realtimeUnsubscribeFromVolumeIndicator(attendeeId)</a>.</p>
<a id="5c-signal-strength-change-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5c. Signal strength change (optional)<a href="#5c-signal-strength-change-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To subscribe to the local attendee’s signal strength changes, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimesubscribetolocalsignalstrengthchange">realtimeSubscribeToLocalSignalStrengthChange(callback)</a>.</p>
<p>To unsubscribe from the local attendee’s signal strength changes, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimeunsubscribetolocalsignalstrengthchange">realtimeUnsubscribeToLocalSignalStrengthChange(callback)</a>.</p>
<a id="5d-subscribe-to-an-active-speaker-detector-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5d. Subscribe to an active-speaker detector (optional)<a href="#5d-subscribe-to-an-active-speaker-detector-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>If you are interested in detecting the active speaker (e.g. to display the active speaker’s video as a large, central tile), subscribe to the active-speaker detector with an active speaker policy such as the <a href="https://aws.github.io/amazon-chime-sdk-js/classes/defaultactivespeakerpolicy.html">DefaultActiveSpeakerPolicy</a>. You can receive updates when the list of active speakers changes. The list is ordered most active to least active. Active speaker policies use volume indicator changes to determine the prominence of each speaker over time.</p>
<p><code>DefaultActiveSpeakerPolicy</code> algorithm works as follows: as you speak, your active speaker score rises and simultaneously decreases the score of others. There are some adjustable weightings in the constructor to control how reactive it is. In general, the defaults do a reasonable job of identifying the active speaker, preventing short noises or interjections from switching the active speaker, but also allowing take over to be relatively quick.</p>
<p>To subscribe to active speaker updates, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#subscribetoactivespeakerdetector">subscribeToActiveSpeakerDetector(policy, callback)</a>.</p>
<p>To unsubscribe from active speaker updates, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#unsubscribefromactivespeakerdetector">unsubscribeFromActiveSpeakerDetector(callback)</a>.</p>
<a id="6-mute-and-unmute-microphone-audio-with-the-real-time-api" class="tsd-anchor"></a><h2 class="tsd-anchor-link">6. Mute and unmute microphone audio with the real-time API<a href="#6-mute-and-unmute-microphone-audio-with-the-real-time-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Use the below real-time API methods to mute and unmute microphone audio. Mute is effective immediately and applied locally; no audio from the microphone will be transmitted to the server when muted.</p>
<p>When implementing a real-time callback, you must ensure that it never throws an exception. To preserve privacy, uncaught exceptions inside a real-time callback are treated as fatal: the session is disconnected immediately.</p>
<p>To ensure that attendee privacy is respected, pay close attention that the UI controls for mute are implemented properly with as direct a path possible to the mute and unmute methods. Use the real-time API to determine the current state of mute rather than keeping track of mute state yourself.</p>
<a id="6a-mute-and-unmute-audio" class="tsd-anchor"></a><h3 class="tsd-anchor-link">6a. Mute and unmute audio<a href="#6a-mute-and-unmute-audio" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To mute the local attendee’s audio, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimemutelocalaudio">realtimeMuteLocalAudio()</a>.</p>
<p>To unmute the local attendee’s audio, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimeunmutelocalaudio">realtimeUnmuteLocalAudio()</a>.</p>
<p>To determine if the local attendee’s audio is muted, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimeislocalaudiomuted">realtimeIsLocalAudioMuted()</a>.</p>
<p>To subscribe to changes in the local attendee’s audio mute state, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimesubscribetomuteandunmutelocalaudio">realtimeSubscribeToMuteAndUnmuteLocalAudio(callback)</a>.</p>
<p>To unsubscribe from changes in the local attendee’s audio mute state, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimeunsubscribetomuteandunmutelocalaudio">realtimeUnsubscribeToMuteAndUnmuteLocalAudio(callback)</a>.</p>
<a id="6b-prevent-a-local-attendee-from-unmuting-audio-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">6b. Prevent a local attendee from unmuting audio (optional)<a href="#6b-prevent-a-local-attendee-from-unmuting-audio-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Depending on the type of meeting application you are building, you may want to temporarily prevent the local attendee from unmuting (e.g. to avoid disruption if someone is presenting). If so, use the methods below rather than keeping track of your own can-unmute state.</p>
<p>To set whether or not the local attendee can unmute, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimesetcanunmutelocalaudio">realtimeSetCanUnmuteLocalAudio(canUnmute)</a>.</p>
<p>To determine whether or not the local attendee can unmute, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimecanunmutelocalaudio">realtimeCanUnmuteLocalAudio()</a>.</p>
<p>To subscribe to changes in whether or not the local attendee can unmute, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimesubscribetosetcanunmutelocalaudio">realtimeSubscribeToSetCanUnmuteLocalAudio(callback)</a>.</p>
<p>To unsubscribe from changes in whether or not the local attendee can unmute, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimeunsubscribetosetcanunmutelocalaudio">realtimeUnsubscribeToSetCanUnmuteLocalAudio(callback)</a>.</p>
<a id="7-share-and-display-video" class="tsd-anchor"></a><h2 class="tsd-anchor-link">7. Share and display video<a href="#7-share-and-display-video" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>A video tile is a binding of four key things: a tile ID, an attendee ID, that attendee’s video stream, and an HTMLVideoElement in the DOM. If all those things are present, the video tile is said to be active, and the video element displays video.</p>
<p>Local video is automatically displayed horizontally-mirrored by convention.</p>
<a id="7a-share-local-video" class="tsd-anchor"></a><h3 class="tsd-anchor-link">7a. Share local video<a href="#7a-share-local-video" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>After choosing the video input and starting the meeting session, you can share the local attendee’s video with remote attendees.</p>
<p>To start sharing video with others, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#startlocalvideotile">startLocalVideoTile()</a>.</p>
<p>To stop sharing video with others, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#stoplocalvideotile">stopLocalVideoTile()</a>.</p>
<a id="7b-display-local-and-remote-video" class="tsd-anchor"></a><h3 class="tsd-anchor-link">7b. Display local and remote video<a href="#7b-display-local-and-remote-video" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You are responsible for maintaining HTMLVideoElement objects in the DOM and arranging their layout within the web page. To display a video, you must handle the <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videotiledidupdate">videoTileDidUpdate</a> and <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videotilewasremoved">videoTileWasRemoved</a> callbacks in an <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html">AudioVideoObserver</a>. In the implementation of <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videotiledidupdate">videoTileDidUpdate</a>, bind the tile ID from the provided VideoTileState with the HTMLVideoElement in your DOM by calling meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#bindvideoelement">bindVideoElement(tileId, videoElement)</a>.</p>
<p>To unbind a tile, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#unbindvideoelement">unbindVideoElement(tileId)</a>. Note that this will also set <code>HTMLVideoElement.srcObject</code> to <code>null</code>. Call <code>unbindVideoElement(tileId, false)</code> to avoid the video element clean up. Check <a href="https://github.com/aws/amazon-chime-sdk-js/pull/2217">this PR</a> description for more details.</p>
<p>A <code>tileId</code> is a unique identifier representing a video stream. When you stop and start, it generates a new <code>tileId</code>. You can have tileIds exceeding 25; they merely identify a particular stream uniquely. When you start video it consumes a video publishing slot, when you stop video it releases that video publishing slot. Pausing does not affect video publishing slots; it allows a remote to choose to not receive a video stream (and thus not consume bandwidth and CPU for that stream).</p>
<a id="7c-pause-and-unpause-video-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">7c. Pause and unpause video (optional)<a href="#7c-pause-and-unpause-video-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Video tiles may be paused individually. The server will not send paused video streams to the attendee requesting the pause. Pausing video does not affect remote attendees.</p>
<p>To pause video, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#pausevideotile">pauseVideoTile(tileId)</a>.</p>
<p>To resume a paused video, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#unpausevideotile">unpauseVideoTile(tileId)</a>.</p>
<a id="7d-find-video-tiles-optional" class="tsd-anchor"></a><h3 class="tsd-anchor-link">7d. Find video tiles (optional)<a href="#7d-find-video-tiles-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Aside from the <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videotiledidupdate">videoTileDidUpdate</a> and <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html#videotilewasremoved">videoTileWasRemoved</a> callbacks in an <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideoobserver.html">AudioVideoObserver</a>, video tile information can be gathered from the following methods.</p>
<p>To get all video tiles, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#getallvideotiles">getAllVideoTiles()</a>.</p>
<p>To get all remote attendees’ video tiles, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#getallremotevideotiles">getAllRemoteVideoTiles()</a>.</p>
<p>To get the local attendee’s video tile, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#getlocalvideotile">getLocalVideoTile()</a>.</p>
<p>To get a video tile, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#getvideotile">getVideoTile(tileId)</a>.</p>
<a id="8-share-screen-and-other-content-optional" class="tsd-anchor"></a><h2 class="tsd-anchor-link">8. Share screen and other content (optional)<a href="#8-share-screen-and-other-content-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>You can share any <a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaStream">MediaStream</a>, such as from a screen capture or media file, as the content share for an attendee. When a content share is started, another attendee with the attendee ID <code>&lt;attendee-id&gt;#content</code> joins the meeting. The content audio and video appears like a regular attendee. You can subscribe to its volume indicator to show it in the roster and bind its video tile to a video element the same as you would for a regular attendee.</p>
<p>Each attendee can share one content share in addition to their main mic and camera. Each meeting may have two simultaneous content shares. Content share does not count towards the max video tile limit for both publishing and subscription. There may be up to two content shares irrespective of how many attendees are sharing their camera. Refer to <a href="https://docs.aws.amazon.com/chime-sdk/latest/dg/meetings-sdk.html#mtg-limits">Amazon Chime SDK service quotas
</a> for details.</p>
<a id="8a-start-and-stop-the-content-share" class="tsd-anchor"></a><h3 class="tsd-anchor-link">8a. Start and stop the content share<a href="#8a-start-and-stop-the-content-share" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>To start the content share, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#startcontentshare">startContentShare(stream)</a>.</p>
<p>To start sharing screen as a content share, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#startcontentsharefromscreencapture">startContentShareFromScreenCapture(sourceId)</a>.</p>
<p>To stop the content share, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#stopcontentshare">stopContentShare()</a>.</p>
<p>To pause content share, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#pausecontentshare">pauseContentShare()</a>.</p>
<p>To resume content share, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#unpausecontentshare">unpauseContentShare()</a>.</p>
<a id="8b-register-a-content-share-observer" class="tsd-anchor"></a><h3 class="tsd-anchor-link">8b. Register a content share observer<a href="#8b-register-a-content-share-observer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>You can receive events about the content share by implementing a <a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/contentshareobserver.html">ContentShareObserver</a> and adding the observer to the meeting session.</p>
<p>To add a ContentShareObserver, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#addcontentshareobserver">addContentShareObserver(observer)</a>.</p>
<p>To remove a ContentShareObserver, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#removecontentshareobserver">removeContentShareObserver(observer)</a>.</p>
<p>You can implement the following callbacks:</p>
<ul>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/contentshareobserver.html#contentsharedidstart">contentShareDidStart</a>: occurs when a content share session is started</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/contentshareobserver.html#contentsharedidstop">contentShareDidStop</a>: occurs when a content share session is stopped</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/contentshareobserver.html#contentsharedidpause">contentShareDidPause</a>: occurs when a content share session is paused</li>
<li><a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/contentshareobserver.html#contentsharedidunpause">contentShareDidUnpause</a>: occurs when a content share session is resumed</li>
</ul>
<a id="9-send-and-receive-data-messages-optional" class="tsd-anchor"></a><h2 class="tsd-anchor-link">9. Send and receive data messages (optional)<a href="#9-send-and-receive-data-messages-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Attendees can broadcast small (2KB max) data messages to other attendees. Data messages can be used to signal attendees of changes to meeting state or develop custom collaborative features. Each message is sent on a particular topic, which allows you to tag messages according to their function to make it easier to handle messages of different types.</p>
<p>To send a message on a given topic, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimesenddatamessage">realtimeSendDataMessage()</a>. When sending a message if you specify a lifetime, then the media server stores the messages for the lifetime. Up to 1024 messages may be stored for a maximum of 5 minutes. Any attendee joining late or reconnecting will automatically receive the messages in this buffer once they connect. You can use this feature to help paper over gaps in connectivity or give attendees some context into messages that were recently received.</p>
<p>To receive messages on a given topic, set up a handler using the meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimesubscribetoreceivedatamessage">realtimeSubscribeToReceiveDataMessage()</a>. In the handler, you receive a <a href="https://aws.github.io/amazon-chime-sdk-js/classes/datamessage.html">DataMessage</a> containing the payload of the message and other metadata about the message.</p>
<p>To unsubscribe the receive message handler, call meetingSession.audioVideo.<a href="https://aws.github.io/amazon-chime-sdk-js/interfaces/audiovideofacade.html#realtimeunsubscribefromreceivedatamessage">realtimeUnsubscribeFromReceiveDataMessage()</a>.</p>
<p>If you send too many messages at once, your messages may be returned to you with the <a href="https://aws.github.io/amazon-chime-sdk-js/classes/datamessage.html#throttled">throttled</a> flag set. The current throttling soft limit for Data
Messages is 100 messages per second with the maximum burst size of 200 for a meeting (i.e. a 'token bucket' of size
200 that refills at 100 tokens per second). If you continue to exceed the throttle limit, then the server may hang up the connection. The hard limit for each attendee is 200
messages per second with the maximum burst of 2000 and for a meeting is 500 messages per second with the maximum
burst of 10000.</p>
<p><strong>Note:</strong> Take care when using data messages for functionality involving <em>asymmetric permissions</em> (e.g. a moderator attendee sending a message to regular attendees). Any attendee may, in theory, send any message on any topic. You should always confirm that the message's <a href="https://aws.github.io/amazon-chime-sdk-js/classes/datamessage.html#senderattendeeid">senderAttendeeId</a> belongs to an attendee that is allowed to send that type of message, and your handler should tolerate messages that are not serialized in the format you are expecting.</p>
<p><a href="https://github.com/aws/amazon-chime-sdk-js/issues/new?assignees=&amp;labels=documentation&amp;template=documentation-request.md&amp;title=API%20Overview%20feedback">Give feedback on this guide</a></p>
</div><div class="tsd-comment tsd-typography"></div></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#api-overview"><span>API <wbr/>Overview</span></a><ul><li><a href="#1-create-a-session"><span>1. <wbr/>Create a session</span></a></li><li><ul><li><a href="#1a-create-a-logger"><span>1a. <wbr/>Create a logger</span></a></li><li><a href="#1b-create-a-device-controller"><span>1b. <wbr/>Create a device controller</span></a></li><li><a href="#1c-create-a-meeting-from-your-server-application"><span>1c. <wbr/>Create a meeting from your server application</span></a></li><li><a href="#1d-create-a-meeting-session-configuration"><span>1d. <wbr/>Create a meeting session configuration</span></a></li><li><a href="#1e-create-a-meeting-session"><span>1e. <wbr/>Create a meeting session</span></a></li></ul></li><li><a href="#2-configure-the-session"><span>2. <wbr/>Configure the session</span></a></li><li><ul><li><a href="#2a-configure-the-device-label-trigger-optional"><span>2a. <wbr/>Configure the device label trigger (optional)</span></a></li><li><ul><li><a href="#implement-a-view-onlyobserverspectator-experience"><span>Implement a view-<wbr/>only/observer/spectator experience</span></a></li><li><a href="#safari-user-are-not-able-to-join-the-meeting-in-view-only-mode"><span>Safari user are not able to join the meeting in view-<wbr/>only mode</span></a></li></ul></li><li><a href="#2b-register-a-device-change-observer-optional"><span>2b. <wbr/>Register a device-<wbr/>change observer (optional)</span></a></li><li><a href="#2c-configure-the-audio-input-device"><span>2c. <wbr/>Configure the audio input device</span></a></li><li><a href="#2d-preview-microphone-volume-levels-optional"><span>2d. <wbr/>Preview microphone volume levels (optional)</span></a></li><li><a href="#2e-configure-the-audio-output-device-optional"><span>2e. <wbr/>Configure the audio output device (optional)</span></a></li><li><a href="#2f-bind-the-audio-output-to-an-audio-element"><span>2f. <wbr/>Bind the audio output to an audio element</span></a></li><li><a href="#2g-configure-the-video-input-device"><span>2g. <wbr/>Configure the video input device</span></a></li><li><a href="#2h-preview-local-camera-in-a-video-element-optional"><span>2h. <wbr/>Preview local camera in a video element (optional)</span></a></li></ul></li><li><a href="#3-register-an-audio-video-observer"><span>3. <wbr/>Register an audio-<wbr/>video observer</span></a></li><li><a href="#4-start-and-stop-the-session"><span>4. <wbr/>Start and stop the session</span></a></li><li><ul><li><a href="#4a-set-ideal-video-max-bandwidth-kbps"><span>4a. <wbr/>Set ideal video max bandwidth kbps</span></a></li></ul></li><li><a href="#5-build-a-roster-of-participants-using-the-real-time-api"><span>5. <wbr/>Build a roster of participants using the real-<wbr/>time API</span></a></li><li><ul><li><a href="#5a-subscribe-to-attendee-presence-changes"><span>5a. <wbr/>Subscribe to attendee presence changes</span></a></li><li><a href="#5b-subscribe-to-volume-indicators"><span>5b. <wbr/>Subscribe to volume indicators</span></a></li><li><a href="#5c-signal-strength-change-optional"><span>5c. <wbr/>Signal strength change (optional)</span></a></li><li><a href="#5d-subscribe-to-an-active-speaker-detector-optional"><span>5d. <wbr/>Subscribe to an active-<wbr/>speaker detector (optional)</span></a></li></ul></li><li><a href="#6-mute-and-unmute-microphone-audio-with-the-real-time-api"><span>6. <wbr/>Mute and unmute microphone audio with the real-<wbr/>time API</span></a></li><li><ul><li><a href="#6a-mute-and-unmute-audio"><span>6a. <wbr/>Mute and unmute audio</span></a></li><li><a href="#6b-prevent-a-local-attendee-from-unmuting-audio-optional"><span>6b. <wbr/>Prevent a local attendee from unmuting audio (optional)</span></a></li></ul></li><li><a href="#7-share-and-display-video"><span>7. <wbr/>Share and display video</span></a></li><li><ul><li><a href="#7a-share-local-video"><span>7a. <wbr/>Share local video</span></a></li><li><a href="#7b-display-local-and-remote-video"><span>7b. <wbr/>Display local and remote video</span></a></li><li><a href="#7c-pause-and-unpause-video-optional"><span>7c. <wbr/>Pause and unpause video (optional)</span></a></li><li><a href="#7d-find-video-tiles-optional"><span>7d. <wbr/>Find video tiles (optional)</span></a></li></ul></li><li><a href="#8-share-screen-and-other-content-optional"><span>8. <wbr/>Share screen and other content (optional)</span></a></li><li><ul><li><a href="#8a-start-and-stop-the-content-share"><span>8a. <wbr/>Start and stop the content share</span></a></li><li><a href="#8b-register-a-content-share-observer"><span>8b. <wbr/>Register a content share observer</span></a></li></ul></li><li><a href="#9-send-and-receive-data-messages-optional"><span>9. <wbr/>Send and receive data messages (optional)</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">amazon-chime-sdk-js</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
