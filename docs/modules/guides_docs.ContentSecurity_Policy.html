<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ContentSecurity_Policy | amazon-chime-sdk-js</title><meta name="description" content="Documentation for amazon-chime-sdk-js"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">amazon-chime-sdk-js</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">amazon-chime-sdk-js</a></li><li><a href="guides_docs.html">guides/docs</a></li><li><a href="guides_docs.ContentSecurity_Policy.html">ContentSecurity_Policy</a></li></ul><h1>Namespace ContentSecurity_Policy</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><a id="content-security-policy-for-applications-using-the-amazon-chime-sdk" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Content Security Policy for applications using the Amazon Chime SDK<a href="#content-security-policy-for-applications-using-the-amazon-chime-sdk" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li><a href="#content-security-policy-for-applications-using-the-amazon-chime-sdk">Content Security Policy for applications using the Amazon Chime SDK</a>
<ul>
<li><a href="#meeting">Meeting</a></li>
<li><a href="#messaging">Messaging</a></li>
<li><a href="#logging">Logging</a></li>
<li><a href="#amazon-voice-focus">Amazon Voice Focus</a></li>
</ul>
</li>
</ul>
<p>Modern web applications use <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP">Content Security Policy</a> to protect users from certain classes of attacks. You can add a security policy by configuring your web server to return the Content-Security-Policy HTTP header or using a <code>&lt;meta&gt;</code> element to configure a policy. You can add security headers using <a href="https://docs.aws.amazon.com/lambda/latest/dg/lambda-edge.html">Lambda@Edge</a> and Amazon <a href="https://aws.amazon.com/cloudfront/">CloudFront</a>. For more information, see <a href="https://aws.amazon.com/blogs/networking-and-content-delivery/adding-http-security-headers-using-lambdaedge-and-amazon-cloudfront/">Adding HTTP Security Headers Using Lambda@Edge and Amazon CloudFront</a>.</p>
<p>Include the following in your policy to allow the Amazon Chime SDK access to the meeting, messaging, and Amazon Voice Focus resources.</p>
<p>You can do so via an HTTP header:</p>
<pre><code><span class="hl-0">Content</span><span class="hl-1">-</span><span class="hl-0">Security</span><span class="hl-1">-</span><span class="hl-8">Policy</span><span class="hl-1">: </span><span class="hl-0">content</span><span class="hl-1">=</span><span class="hl-3">&quot;connect-src &#39;self&#39; https://*.chime.aws wss://*.chime.aws https://*.amazonaws.com https://*.sdkassets.chime.aws; script-src &#39;self&#39; https://*.sdkassets.chime.aws; script-src-elem &#39;self&#39; https://*.sdkassets.chime.aws &#39;wasm-unsafe-eval&#39;; worker-src &#39;blob:&#39;; child-src &#39;blob:</span><span class="hl-11">&#39;</span>
</code><button>Copy</button></pre>

<p>a <code>&lt;meta&gt;</code> tag:</p>
<pre><code class="html"><span class="hl-13">&lt;</span><span class="hl-14">meta</span><span class="hl-1"> </span><span class="hl-15">http-equiv</span><span class="hl-1">=</span><span class="hl-16">&quot;Content-Security-Policy&quot;</span><span class="hl-1"> </span><span class="hl-15">content</span><span class="hl-1">=</span><span class="hl-16">&quot;connect-src &#39;self&#39; https://*.chime.aws wss://*.chime.aws https://*.amazonaws.com https://*.sdkassets.chime.aws; script-src &#39;self&#39; https://*.sdkassets.chime.aws &#39;wasm-eval&#39; &#39;wasm-unsafe-eval&#39; &#39;unsafe-eval&#39;; script-src-elem &#39;self&#39; https://*.sdkassets.chime.aws; worker-src blob:; child-src blob:&quot;</span><span class="hl-13">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>or by using a bundling tool like <code>csp-html-webpack-plugin</code> with input like:</p>
<pre><code class="javascript"><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">CspHtmlWebpackPlugin</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">&#39;connect-src&#39;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-3">&quot;&#39;self&#39; https://*.chime.aws wss://*.chime.aws https://*.amazonaws.com https://*.sdkassets.chime.aws&quot;</span><span class="hl-1">,</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// &#39;wasm-unsafe-eval&#39; is to allow Amazon Voice Focus to work in Chrome 95+.</span><br/><span class="hl-1">  </span><span class="hl-7">// Strictly speaking, this should be enough, but the worker cannot compile WebAssembly unless</span><br/><span class="hl-1">  </span><span class="hl-7">// &#39;unsafe-eval&#39; is also present.</span><br/><span class="hl-1">  </span><span class="hl-3">&#39;script-src&#39;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-3">&quot;&#39;self&#39; https://*.sdkassets.chime.aws &#39;wasm-eval&#39; &#39;wasm-unsafe-eval&#39; &#39;unsafe-eval&#39;&quot;</span><span class="hl-1">,</span><br/><br/><span class="hl-1">  </span><span class="hl-7">// Script hashes/nonces are not emitted for script-src-elem, so just add unsafe-inline.</span><br/><span class="hl-1">  </span><span class="hl-3">&#39;script-src-elem&#39;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-3">&quot;&#39;self&#39; https://*.sdkassets.chime.aws &#39;unsafe-inline&#39;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">&#39;worker-src&#39;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-3">&quot;blob:&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">&#39;child-src&#39;</span><span class="hl-0">:</span><span class="hl-1"> </span><span class="hl-3">&quot;blob:&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">}),</span>
</code><button type="button">Copy</button></pre>

<p><code>csp-html-webpack-plugin</code> will automatically generate hashes and nonces for your inline script and style tags.</p>
<p>Note that <code>script-src-elem</code> is not supported in Safari and Firefox. <code>worker-src</code> is not supported in Safari.</p>
<p>You will need to add your own entries to this policy to allow for making connections and downloading scripts and assets required by your own application.</p>
<a id="meeting" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Meeting<a href="#meeting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you use audio, video, or screen sharing in your application by creating a <a href="https://github.com/aws/amazon-chime-sdk-js#meeting-session">meeting session</a>, ensure that your policy includes the following:</p>
<pre><code><span class="hl-0">connect</span><span class="hl-1">-</span><span class="hl-8">src</span><span class="hl-1">: *.</span><span class="hl-0">chime</span><span class="hl-1">.</span><span class="hl-0">aws</span><span class="hl-1"> </span><span class="hl-8">wss</span><span class="hl-1">:</span><span class="hl-7">//*.chime.aws</span>
</code><button>Copy</button></pre>

<a id="messaging" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Messaging<a href="#messaging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you use the <a href="https://docs.aws.amazon.com/chime-sdk/latest/dg/using-the-messaging-sdk.html">Amazon Chime SDK messaging</a> with <a href="https://aws.amazon.com/cognito/">Amazon Cognito</a>, ensure that you add the following:</p>
<pre><code><span class="hl-0">connect</span><span class="hl-1">-</span><span class="hl-8">src</span><span class="hl-1">: *.</span><span class="hl-0">amazonaws</span><span class="hl-1">.</span><span class="hl-0">com</span>
</code><button>Copy</button></pre>

<a id="logging" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Logging<a href="#logging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Amazon Chime SDK for JavaScript listens to the browser's <a href="https://developer.mozilla.org/en-US/docs/Web/API/SecurityPolicyViolationEvent">security policy violation event</a> and logs URIs that were blocked by the browser when joining meetings, creating audio and video devices, or establishing messaging sessions. The Amazon Chime SDK for JavaScript outputs &quot;Security Policy Violation&quot; error messages to the web console if you enable the console logger. The security policy violation event is an experimental technology and it is only supported in several major browsers. See <a href="https://developer.mozilla.org/en-US/docs/Web/API/SecurityPolicyViolationEvent#browser_compatibility">browser compatibility</a> for more information before using this in production.</p>
<p>If you want to disable the error for security policy violation events, you can do the following in your application:</p>
<pre><code class="typescript"><span class="hl-2">import</span><span class="hl-1"> { </span><span class="hl-0">CSPMonitor</span><span class="hl-1"> } </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-3">&#39;amazon-chime-sdk-js&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">CSPMonitor</span><span class="hl-1">.</span><span class="hl-6">disable</span><span class="hl-1">();</span><br/><br/><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">meetingSession</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-6">DefaultMeetingSession</span><span class="hl-1">(...);</span><br/><span class="hl-0">meetingSession</span><span class="hl-1">.</span><span class="hl-0">audioVideo</span><span class="hl-1">.</span><span class="hl-6">start</span><span class="hl-1">()</span>
</code><button type="button">Copy</button></pre>

<a id="amazon-voice-focus" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Amazon Voice Focus<a href="#amazon-voice-focus" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>To use <a href="https://aws.github.io/amazon-chime-sdk-js/modules/amazonvoice_focus.html">Amazon Voice Focus</a>, see the <a href="https://aws.github.io/amazon-chime-sdk-js/modules/amazonvoice_focus.html#content-security-policy">Amazon Voice Focus guide</a>.</p>
<p><a href="https://github.com/aws/amazon-chime-sdk-js/issues/new?assignees=&amp;labels=documentation&amp;template=documentation-request.md&amp;title=Content%20Security_Policy%20feedback">Give feedback on this guide</a></p>
</div><div class="tsd-comment tsd-typography"></div></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#content-security-policy-for-applications-using-the-amazon-chime-sdk"><span>Content <wbr/>Security <wbr/>Policy for applications using the <wbr/>Amazon <wbr/>Chime SDK</span></a><ul><li><a href="#meeting"><span>Meeting</span></a></li><li><a href="#messaging"><span>Messaging</span></a></li><li><a href="#logging"><span>Logging</span></a></li><li><a href="#amazon-voice-focus"><span>Amazon <wbr/>Voice <wbr/>Focus</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">amazon-chime-sdk-js</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
